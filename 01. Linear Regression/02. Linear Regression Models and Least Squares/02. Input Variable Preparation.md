## Fontes de Vari√°veis de Entrada em Modelos de Regress√£o Linear: Uma An√°lise Detalhada

```mermaid
graph LR
    A[Vari√°veis de Entrada] --> B(Quantitativas);
    A --> C(Transforma√ß√µes);
    A --> D(Expans√µes de Base);
    A --> E(Codifica√ß√£o Dummy);
    A --> F(Intera√ß√µes);
    B --> G("Altura, Peso, Idade...");
    C --> H("Log, Raiz, Pot√™ncia...");
    D --> I("Polin√¥mios, Splines, Fourier...");
     E --> J("Sedan, Hatch, SUV...");
     F --> K("X1*X2");
```

### Introdu√ß√£o

A constru√ß√£o de um modelo de regress√£o linear eficaz depende da escolha e representa√ß√£o adequadas das vari√°veis preditoras ou de entrada. As vari√°veis de entrada podem ter diversas naturezas, incluindo vari√°veis quantitativas, vari√°veis transformadas, expans√µes de base, codifica√ß√µes *dummy* para entradas qualitativas e intera√ß√µes entre vari√°veis. A compreens√£o dessas fontes de dados, e como elas se conectam √† regress√£o linear, √© essencial para a cria√ß√£o de modelos capazes de capturar padr√µes complexos nos dados e produzir previs√µes precisas e √∫teis [^44]. Este cap√≠tulo explorar√° em detalhes as diversas fontes de vari√°veis de entrada, como elas s√£o constru√≠das e como se relacionam com a modelagem de regress√£o linear.

### Fontes de Vari√°veis de Entrada

Vamos explorar as diferentes fontes de vari√°veis preditoras que podem ser utilizadas em modelos de regress√£o linear.

**Vari√°veis Quantitativas**
As **vari√°veis quantitativas** s√£o aquelas que representam medidas num√©ricas, que podem ser expressas numa escala cont√≠nua ou discreta. Exemplos t√≠picos de vari√°veis quantitativas incluem altura, peso, idade, renda, pre√ßos de a√ß√µes, taxas de juro e √≠ndices de mercado [^44]. Essas vari√°veis s√£o diretamente utiliz√°veis nos modelos de regress√£o linear, e podem representar medidas diretas do fen√¥meno que se est√° tentando modelar. No entanto, muitas vezes √© vantajoso transformar vari√°veis quantitativas de forma a melhorar o desempenho do modelo.

> üí° **Exemplo Num√©rico:**
> Suponha que temos um conjunto de dados com a idade de pessoas e seus respectivos n√≠veis de colesterol. A idade (em anos) √© uma vari√°vel quantitativa que pode ser usada diretamente em um modelo de regress√£o linear para prever o n√≠vel de colesterol. Por exemplo, se temos os seguintes dados:
>
> | Idade (anos) | Colesterol (mg/dL) |
> |--------------|--------------------|
> | 30           | 180                |
> | 40           | 200                |
> | 50           | 220                |
> | 60           | 240                |
> | 70           | 260                |
>
> Poder√≠amos usar um modelo de regress√£o linear simples para tentar prever o colesterol baseado na idade.

**Transforma√ß√µes de Vari√°veis Quantitativas**
As **transforma√ß√µes de vari√°veis quantitativas** consistem na aplica√ß√£o de fun√ß√µes matem√°ticas a vari√°veis quantitativas com o objetivo de melhorar a rela√ß√£o com a vari√°vel resposta e/ou atenuar a influ√™ncia de *outliers* [^44]. As transforma√ß√µes s√£o uma forma de tornar as rela√ß√µes entre preditores e respostas mais lineares, ou mais facilmente expressas em modelos lineares. Transforma√ß√µes comuns incluem:

1.  **Logaritmo:** A transforma√ß√£o logar√≠tmica,  $\log(x)$, comprime a escala de vari√°veis com distribui√ß√µes enviesadas para a direita, e tamb√©m ajuda a linearizar rela√ß√µes exponenciais.  Essa transforma√ß√£o √© √∫til para vari√°veis como renda ou pre√ßos de ativos, onde a distribui√ß√£o original √© muito enviesada, com valores muito maiores sendo menos prov√°veis.
> üí° **Exemplo Num√©rico:**
> Suponha que estamos modelando o pre√ßo de casas em fun√ß√£o da sua √°rea. Se a rela√ß√£o entre √°rea e pre√ßo for exponencial, a transforma√ß√£o logar√≠tmica pode ajudar. Se a √°rea de uma casa for 100m¬≤, e seu pre√ßo for R\$ 200.000, e uma casa com 200m¬≤ custar R\$ 400.000, a rela√ß√£o √© aproximadamente linear. No entanto, se uma casa com 400m¬≤ custar R\$ 1.000.000, a rela√ß√£o √© exponencial. Aplicando o logaritmo, a rela√ß√£o entre $\log(\text{area})$ e $\log(\text{pre√ßo})$ pode se tornar mais linear. Usando logaritmo na base 10, ter√≠amos:
>
> | √Årea (m¬≤) | Pre√ßo (R$) | Log10(√Årea) | Log10(Pre√ßo) |
> |-----------|-----------|------------|-------------|
> | 100       | 200.000   | 2          | 5.30        |
> | 200       | 400.000   | 2.30       | 5.60        |
> | 400       | 1.000.000 | 2.60       | 6           |
>
> A rela√ß√£o entre as vari√°veis transformadas parece mais linear.
2. **Raiz Quadrada:** A transforma√ß√£o da raiz quadrada, $\sqrt{x}$, √© uma transforma√ß√£o √∫til para diminuir o impacto de valores altos, comprimindo a escala original, e √© √∫til em cen√°rios onde h√° a necessidade de balancear a import√¢ncia de valores maiores e menores.
> üí° **Exemplo Num√©rico:**
> Considere o n√∫mero de vendas de um produto em diferentes dias. Se alguns dias t√™m um n√∫mero de vendas muito alto (outliers), a raiz quadrada pode reduzir o impacto desses dias. Se as vendas forem 100, 225, 400, as ra√≠zes quadradas seriam 10, 15, 20, comprimindo a escala original.
3. **Pot√™ncia:** A transforma√ß√£o de pot√™ncia, $x^n$, com um valor inteiro de $n$, permite expandir ou comprimir a escala das vari√°veis, e tamb√©m criar rela√ß√µes n√£o lineares com a resposta atrav√©s de um modelo linear.
> üí° **Exemplo Num√©rico:**
> Se tivermos uma rela√ß√£o quadr√°tica entre uma vari√°vel de entrada e a vari√°vel resposta, podemos usar a transforma√ß√£o $x^2$. Por exemplo, se a vari√°vel de entrada $x$ for 2, a transforma√ß√£o resultar√° em 4. Se $x$ for 3, a transforma√ß√£o resultar√° em 9, e assim por diante.
4. **Quadrado:** A transforma√ß√£o do quadrado $x^2$ √© √∫til para modelos polinomiais de segundo grau e para melhorar a modelagem de rela√ß√µes curvas.

As transforma√ß√µes ajudam a melhorar a modelagem e o ajuste das rela√ß√µes atrav√©s do uso de modelos lineares. A escolha da transforma√ß√£o apropriada depende do problema, e a sua escolha geralmente envolve experimenta√ß√£o e an√°lise de *insights* dos dados, bem como conhecimento a *priori* da forma esperada da resposta em fun√ß√£o do preditor.

**Expans√µes de Base**
As **expans√µes de base** s√£o transforma√ß√µes que convertem uma √∫nica vari√°vel em um conjunto de novas vari√°veis, com o objetivo de modelar rela√ß√µes n√£o lineares usando modelos lineares [^44]. As expans√µes de base transformam um √∫nico preditor em um conjunto de preditores, que podem ser usados num modelo linear. As mais comuns s√£o:

1.  **Polin√¥mios:**  Os polin√¥mios s√£o expans√µes de base que adicionam pot√™ncias da vari√°vel original ($x, x^2, x^3, \ldots$) como preditores no modelo, permitindo modelar rela√ß√µes n√£o lineares entre um preditor e a vari√°vel resposta. Um modelo com expans√µes de polin√¥mios pode ser escrito como
$$
y = \beta_0 + \beta_1 x + \beta_2 x^2 + \beta_3 x^3 + \ldots + \beta_n x^n
$$
onde cada termo √© um preditor diferente, mas as rela√ß√µes ainda s√£o lineares nos coeficientes.
> üí° **Exemplo Num√©rico:**
> Suponha que a rela√ß√£o entre a idade de uma pessoa e sua probabilidade de ter uma doen√ßa n√£o seja linear. Podemos usar uma expans√£o polinomial para modelar essa rela√ß√£o. Se tivermos uma amostra de dados onde a probabilidade aumenta com a idade, mas com uma acelera√ß√£o, podemos usar um modelo polinomial de segundo grau:
> $$ \text{Probabilidade} = \beta_0 + \beta_1 \text{Idade} + \beta_2 \text{Idade}^2 $$
> Aqui,  $\text{Idade}$ e $\text{Idade}^2$ s√£o dois preditores diferentes, e o modelo ainda √© linear nos par√¢metros $\beta$.
2. **Splines:** Os *Splines* s√£o expans√µes de base que combinam polin√¥mios de baixa ordem em intervalos diferentes do dom√≠nio da vari√°vel. A ideia √© combinar v√°rios polin√¥mios de baixa ordem para criar uma fun√ß√£o n√£o linear suave que aproxima bem os dados, e permite modelar n√£o linearidades localizadas.
3. **S√©ries de Fourier:**  As s√©ries de Fourier usam senos e cosenos de diferentes frequ√™ncias como expans√µes de base, com a vantagem de modelar rela√ß√µes peri√≥dicas.
> üí° **Exemplo Num√©rico:**
> Considere dados de vendas de sorvete ao longo de um ano. As vendas tendem a ter um padr√£o sazonal, aumentando no ver√£o e diminuindo no inverno. Podemos usar s√©ries de Fourier para modelar esse padr√£o. Um modelo simples poderia usar um seno e um cosseno:
> $$ \text{Vendas} = \beta_0 + \beta_1 \sin(2\pi t/365) + \beta_2 \cos(2\pi t/365) $$
> onde $t$ √© o dia do ano.
```mermaid
graph LR
    A[Vari√°vel √önica] --> B(Expans√£o de Base);
    B --> C(Polin√¥mios);
    B --> D(Splines);
    B --> E(S√©ries de Fourier);
    C --> F("x, x^2, x^3...");
    D --> G("Combina√ß√£o de polin√¥mios");
    E --> H("Senos e Cosenos");
```

Em geral, a escolha da expans√£o de base, bem como a sua ordem ou complexidade, dependem do problema em m√£os, da rela√ß√£o esperada entre preditores e respostas, e do grau desejado de complexidade do modelo.
√â importante notar que todas estas transforma√ß√µes resultam num modelo de regress√£o linear, uma vez que o modelo continua linear nos par√¢metros $\beta_i$, mesmo que as vari√°veis $X$ sejam transformadas por fun√ß√µes n√£o lineares.

**Codifica√ß√£o *Dummy* para Entradas Qualitativas**
As **entradas qualitativas**, tamb√©m conhecidas como vari√°veis categ√≥ricas, s√£o aquelas que representam categorias, como por exemplo cor de cabelo, tipos de produto, ou n√≠veis de escolaridade. Para usar vari√°veis qualitativas em modelos de regress√£o linear, √© necess√°rio transform√°-las em vari√°veis num√©ricas utilizando uma t√©cnica conhecida como codifica√ß√£o *dummy* [^44].
O m√©todo de codifica√ß√£o *dummy* cria uma nova vari√°vel para cada categoria da vari√°vel qualitativa original. Para um fator categ√≥rico com $k$ n√≠veis, o modelo de regress√£o cria $k$ vari√°veis *dummy*, onde o valor de cada vari√°vel √© 1 para as observa√ß√µes que pertencem a categoria correspondente, e 0 para as observa√ß√µes que n√£o pertencem a categoria.  A codifica√ß√£o *dummy* introduz a informa√ß√£o das categorias no modelo linear.
Com $k$ categorias, a codifica√ß√£o cria $k$ vari√°veis, mas apenas $k-1$ podem ser usadas no modelo, dado que uma delas √© redundante. A vari√°vel omitida √© chamada de categoria de refer√™ncia.
A escolha da categoria de refer√™ncia e a ordem das categorias n√£o afeta a capacidade do modelo de ajustar os dados, mas afeta a interpreta√ß√£o dos coeficientes.
> üí° **Exemplo Num√©rico:**
> Suponha que estamos modelando o pre√ßo de carros e temos uma vari√°vel categ√≥rica "tipo de carro" com tr√™s categorias: "sedan", "hatch" e "SUV". Criaremos duas vari√°veis *dummy*: $D_1$ que ser√° 1 para "sedan" e 0 caso contr√°rio, e $D_2$ que ser√° 1 para "hatch" e 0 caso contr√°rio. "SUV" ser√° a categoria de refer√™ncia. O modelo de regress√£o linear seria:
> $$ \text{Pre√ßo} = \beta_0 + \beta_1 D_1 + \beta_2 D_2 $$
> Se um carro for um sedan, $D_1$ ser√° 1 e $D_2$ ser√° 0, o pre√ßo ser√° $\beta_0 + \beta_1$. Se o carro for um hatch, $D_1$ ser√° 0 e $D_2$ ser√° 1, o pre√ßo ser√° $\beta_0 + \beta_2$. Se o carro for um SUV, $D_1$ e $D_2$ ser√£o 0, o pre√ßo ser√° $\beta_0$. Os coeficientes $\beta_1$ e $\beta_2$ representam a diferen√ßa no pre√ßo em rela√ß√£o ao SUV, que √© a categoria de refer√™ncia.

**Intera√ß√µes entre Vari√°veis**
As **intera√ß√µes entre vari√°veis** representam o efeito conjunto de duas ou mais vari√°veis na vari√°vel resposta. A inclus√£o de termos de intera√ß√£o permite modelar rela√ß√µes onde o efeito de uma vari√°vel sobre a resposta depende do valor de outras vari√°veis [^44].
Por exemplo, se $X_1$ e $X_2$ s√£o duas vari√°veis preditoras, a intera√ß√£o entre elas pode ser expressa atrav√©s do produto $X_1X_2$, que adiciona um novo preditor ao modelo. A fun√ß√£o do modelo linear, neste caso, passaria a incluir um termo de intera√ß√£o:
$$
f(x) = \beta_0 + \beta_1 X_1 + \beta_2 X_2 + \beta_3 X_1X_2
$$
Os modelos com termos de intera√ß√£o podem representar fen√¥menos mais complexos, mas a sua interpreta√ß√£o pode ser mais dif√≠cil que modelos sem termos de intera√ß√£o.
O uso de modelos com intera√ß√µes deve ser bem ponderado para evitar *overfitting* e para n√£o introduzir par√¢metros excessivos, que s√£o dif√≠ceis de interpretar.
> üí° **Exemplo Num√©rico:**
> Suponha que estamos modelando a quantidade de vendas de um produto, e temos duas vari√°veis: o pre√ßo do produto ($X_1$) e o gasto em publicidade ($X_2$). Pode ser que o efeito da publicidade nas vendas seja maior quando o pre√ßo do produto √© menor. Neste caso, a intera√ß√£o entre pre√ßo e publicidade pode ser relevante:
> $$ \text{Vendas} = \beta_0 + \beta_1 \text{Pre√ßo} + \beta_2 \text{Publicidade} + \beta_3 (\text{Pre√ßo} \times \text{Publicidade}) $$
> O coeficiente $\beta_3$ mede o efeito da intera√ß√£o. Se $\beta_3$ for negativo, significa que o efeito da publicidade √© menor quando o pre√ßo √© alto.

```mermaid
graph LR
    A[Vari√°veis] --> B(Intera√ß√£o);
    B --> C("X1*X2");
    C --> D("Efeito conjunto");
```

**Lemma 15:**  A Linearidade nos Par√¢metros com Vari√°veis Transformadas e Intera√ß√µes
Mesmo com transforma√ß√µes n√£o lineares das vari√°veis e inclus√£o de termos de intera√ß√£o, um modelo de regress√£o linear continua sendo linear nos par√¢metros $\beta$ [^44]. Este resultado √© fundamental para garantir que os m√©todos de estima√ß√£o, como m√≠nimos quadrados, podem ser aplicados sem grandes altera√ß√µes.

**Prova do Lemma 15:**

Para um modelo com as expans√µes de base e termos de intera√ß√£o, a fun√ß√£o de regress√£o linear pode ser escrita como:

$$ f(x) = \beta_0 + \sum_{j=1}^{p} \beta_j  \phi_j(x_j) + \sum_{j=1}^{p} \sum_{k=j+1}^{p} \beta_{jk} x_j x_k $$

onde $\phi_j(x_j)$ representa uma fun√ß√£o qualquer que transforma o preditor $x_j$ , e os termos $x_j x_k$ representam as intera√ß√µes. Mesmo com estas transforma√ß√µes, a fun√ß√£o $f(x)$ continua sendo linear em rela√ß√£o aos par√¢metros $\beta$ e os m√©todos de m√≠nimos quadrados podem ser aplicados. $\blacksquare$

**Corol√°rio 15:**  A Flexibilidade da Regress√£o Linear

O Lemma 15 demonstra a flexibilidade e versatilidade do modelo de regress√£o linear. Este modelo, ao permitir diferentes tipos de transforma√ß√µes nas vari√°veis, e intera√ß√µes entre vari√°veis, pode ser usado para modelar uma vasta gama de problemas. A capacidade do modelo linear de ser expressa como uma combina√ß√£o linear dos par√¢metros √© fundamental para o funcionamento dos algoritmos de otimiza√ß√£o.

> ‚ö†Ô∏è **Nota Importante**: Vari√°veis quantitativas s√£o usadas diretamente, vari√°veis qualitativas precisam de codifica√ß√£o *dummy*, transforma√ß√µes e expans√µes de base alteram o comportamento dos preditores, e intera√ß√µes capturam efeitos combinados de duas ou mais vari√°veis.  **Refer√™ncia ao contexto [^44]**.

> ‚ùó **Ponto de Aten√ß√£o**: A regress√£o linear √© linear nos par√¢metros, mesmo que os preditores sejam transformados ou combinados em termos de intera√ß√£o. **Conforme indicado no contexto [^44]**.

### Aplica√ß√µes e Exemplos Pr√°ticos

A escolha das fontes de vari√°veis de entrada depende do problema e do fen√¥meno a ser modelado. Abaixo, alguns exemplos:

1.  **Modelagem de pre√ßos de im√≥veis:** Vari√°veis quantitativas como √°rea, n√∫mero de quartos, e dist√¢ncia do centro da cidade podem ser usadas diretamente. A transforma√ß√£o logar√≠tmica no pre√ßo do im√≥vel pode ajudar a linearizar a rela√ß√£o. Vari√°veis qualitativas como bairro e tipo de im√≥vel precisam ser codificadas usando *dummy*. Intera√ß√µes entre √°rea e n√∫mero de quartos podem melhorar a performance do modelo.
2.  **Modelagem de s√©ries temporais:** Vari√°veis quantitativas como o pre√ßo de um ativo em instantes temporais podem ser usadas. Transforma√ß√µes como o retorno logar√≠tmico podem ser √∫teis. Expans√µes de base usando s√©ries de Fourier podem ajudar a modelar o componente c√≠clico. Intera√ß√µes entre vari√°veis temporais e outras vari√°veis como indicadores de mercado podem ser relevantes.
3. **Modelagem em Biomedicina**: Vari√°veis quantitativas como press√£o sangu√≠nea, colesterol e n√≠vel de glicose podem ser combinadas. Transforma√ß√µes logar√≠tmicas podem ser √∫teis para lidar com distribui√ß√µes enviesadas. Vari√°veis qualitativas como etnia, sexo e status social precisam de codifica√ß√£o *dummy*. Intera√ß√µes entre os preditores s√£o importantes para entender quais os efeitos conjuntos de diferentes fatores.
4.  **Modelagem em Marketing:** Vari√°veis quantitativas como gastos em an√∫ncios, pre√ßo de produto e n√∫mero de visitas em uma p√°gina da web podem ser usadas. Transforma√ß√µes logar√≠tmicas de pre√ßos e gastos podem linearizar a rela√ß√£o com a resposta. Vari√°veis qualitativas como tipo de an√∫ncio, regi√£o geogr√°fica, idade, e sexo necessitam de codifica√ß√£o *dummy*. Intera√ß√µes entre os preditores ajudam a modelar o impacto conjunto de vari√°veis.

A escolha das vari√°veis de entrada √© um processo iterativo, que envolve an√°lise explorat√≥ria dos dados, conhecimento pr√©vio sobre o problema, e avalia√ß√£o do desempenho preditivo de diferentes conjuntos de preditores.

### Conclus√£o

As fontes de vari√°veis de entrada em modelos de regress√£o linear s√£o diversas e abrangem vari√°veis quantitativas, suas transforma√ß√µes, expans√µes de base, codifica√ß√£o *dummy* para vari√°veis qualitativas, e intera√ß√µes entre vari√°veis. A combina√ß√£o e transforma√ß√£o dessas fontes de vari√°veis de forma apropriada √© fundamental para o sucesso de qualquer modelo de regress√£o. A escolha de quais vari√°veis usar deve estar guiada tanto pelo conhecimento do problema como tamb√©m pela avalia√ß√£o da performance do modelo e a interpretabilidade dos seus resultados.

### Refer√™ncias

[^44]: "No matter the source of the Xj, the model is linear in the parameters. The most popular estimation method is least squares." *(Trecho de Linear Methods for Regression)*

[^1]: "A linear regression model assumes that the regression function E(Y|X) is linear in the inputs X1,..., Xp." *(Trecho de Linear Methods for Regression)*
